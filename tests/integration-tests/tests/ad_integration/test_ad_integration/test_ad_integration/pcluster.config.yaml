Image:
  Os: {{ os }}
HeadNode:
  InstanceType: {{ instance }}
  Networking:
    SubnetId: {{ directory_subnet }}
  Ssh:
    KeyName: {{ key_name }}
  Imds:
    Secured: {{ imds_secured }}
Scheduling:
  Scheduler: {{ scheduler }}
  SlurmQueues:
    - Name: compute
      ComputeResources:
        - Name: cit
          InstanceType: {{ compute_instance_type }}
          MinCount: 2
          MaxCount: 3000
      Networking:
        SubnetIds:
          - {{ directory_subnet }}
Monitoring:
  Logs:
    CloudWatch:
      Enabled: true
      RetentionInDays: 14
SharedStorage:
  - MountDir: /shared
    Name: fsx
    StorageType: FsxLustre
    FsxLustreSettings:
      StorageCapacity: 2400
  - MountDir: /ebs
    Name: ebs
    StorageType: Ebs
DirectoryService:
  DomainName: {{ ldap_search_base }}
  DomainAddr: {{ ldap_uri }}  # TODO: use ldaps
  PasswordSecretArn: {{ password_secret_arn }}
  DomainReadOnlyUser: {{ ldap_default_bind_dn }} # TODO: parametrize username
  LdapTlsReqCert: never # TODO: use 'require'
