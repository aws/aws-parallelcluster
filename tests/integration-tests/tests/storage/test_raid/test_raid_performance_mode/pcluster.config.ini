[global]
cluster_template = default

[aws]
aws_region_name = {{ region }}

[cluster default]
base_os = {{ os }}
key_name = {{ key_name }}
vpc_settings = parallelcluster-vpc
scheduler = {{ scheduler }}
master_instance_type = {{ instance }}
compute_instance_type = {{ instance }}
{% if scheduler == "awsbatch" %}
min_vcpus = 4
desired_vcpus = 4
{% else %}
initial_queue_size = 1
maintain_initial_size = true
{% endif %}
raid_settings = raid_type0
{% if scheduler == "awsbatch" %}
template_url = https://us-east-1-aws-parallelcluster.s3.amazonaws.com/patches/2.11.7/aws-parallelcluster-2.11.7.cfn.json
{% endif %}

[vpc parallelcluster-vpc]
vpc_id = {{ vpc_id }}
master_subnet_id = {{ public_subnet_id }}
compute_subnet_id = {{ private_subnet_id }}
use_public_ips = false

[raid raid_type0]
shared_dir = /raid_dir
raid_type = 0
num_of_raid_volumes = 5
volume_type = io1
volume_size = 15
volume_iops = 750
encrypted = false
